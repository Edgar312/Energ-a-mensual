<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consumo El√©ctrico en Casa</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.2/dist/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
  <nav class="navbar">
    <div class="nav-left">
      <div class="nav-logo">‚ö°</div>
      <div class="nav-title">
        <h1>Consumo El√©ctrico</h1>
        <span class="subtitulo">Control para casas e instituciones</span>
      </div>
      <button id="btn-logout">Cerrar sesi√≥n</button>
    </div>

    <div class="nav-right">
      <div class="nav-group">
        <label for="pais">Pa√≠s</label>
        <select id="pais">
          <option value="mx">M√©xico</option>
          <option value="ar">Argentina</option>
          <option value="cl">Chile</option>
          <option value="co">Colombia</option>
          <option value="pe">Per√∫</option>
        </select>
      </div>

      <div class="nav-group">
        <label for="plan">Plan</label>
        <select id="plan">
          <option value="personal">Personal</option>
          <option value="pro">Pro</option>
          <option value="empresa">Empresa</option>
        </select>
      </div>

      <button id="modo-oscuro-toggle" class="icon-button" title="Cambiar tema">
        üåô
      </button>
    </div>
  </nav>

  <nav class="menu-navegacion">
    <button class="nav-tab active" data-seccion="formulario">Inicio</button>
    <button class="nav-tab" data-seccion="registros">Registros</button>
    <button class="nav-tab" data-seccion="resumen">Resumen</button>
    <button class="nav-tab" data-seccion="grafica">Gr√°ficas</button>
    <button class="nav-tab" data-seccion="historial">Historial</button>
  </nav>

  <header id="hero" class="hero">
    <div class="hero-texto">
      <h2>Monitorea tu consumo el√©ctrico como un profesional ‚öôÔ∏è</h2>
      <p>
        Registra aparatos por zonas, compara d√≠as y meses, controla metas de kWh y
        adapta la capacidad seg√∫n tu tipo de instalaci√≥n: casa, escuela, negocio o empresa.
      </p>
    </div>
    <div class="hero-panel">
      <h3>Plan actual</h3>
      <p id="plan-nombre">Personal</p>
      <ul>
        <li><strong>Zonas m√°ximas:</strong> <span id="plan-zonas-max"></span></li>
        <li><strong>Registros m√°ximos:</strong> <span id="plan-registros-max"></span></li>
        <li><strong>Zonas usadas:</strong> <span id="plan-zonas-uso"></span></li>
        <li><strong>Registros usados:</strong> <span id="plan-registros-uso"></span></li>
      </ul>

      <div class="campo-institucion">
        <label for="nombre-institucion">Instituci√≥n / empresa</label>
        <input type="text" id="nombre-institucion" placeholder="Ej. Colegio Ju√°rez, Planta M√©rida">
      </div>

      <p class="plan-hint">
        Sube a <strong>Pro</strong> o <strong>Empresa</strong> para instituciones con m√°s √°reas y equipos.
      </p>
    </div>
  </header>
  <section id="planes" class="tarjeta tarjeta-planes">
  <h2>Planes disponibles</h2>
  <p class="planes-intro">
    Comienza con el plan <strong>Personal</strong> para tu casa y escala a
    <strong>Pro</strong> o <strong>Empresa</strong> si necesitas m√°s zonas, equipos y reportes avanzados.
  </p>

  <div class="planes-grid">
    <!-- Plan Personal -->
    <article class="plan-card plan-personal">
      <h3>Personal</h3>
      <p class="plan-tag">Ideal para casas y departamentos</p>
      <p class="plan-price">$0 / mes</p>
      <ul class="plan-lista">
        <li>Hasta <strong>3 zonas</strong></li>
        <li>M√°x. <strong>3 aparatos por zona</strong></li>
        <li>Hasta <strong>10 registros diarios</strong></li>
        <li>Exportar a <strong>CSV</strong></li>
        <li>Gr√°ficas y meta mensual</li>
        <li class="plan-limitado">‚ùå Historial mensual</li>
        <li class="plan-limitado">‚ùå Reporte PDF</li>
      </ul>
      <button class="plan-cta" data-plan="personal">Usar plan Personal</button>
    </article>

    <!-- Plan Pro -->
    <article class="plan-card plan-pro">
      <div class="plan-chip">M√°s popular</div>
      <h3>Pro</h3>
      <p class="plan-tag">Escuelas, oficinas o negocios peque√±os</p>
      <p class="plan-price">$ ‚Äî / mes</p>
      <ul class="plan-lista">
        <li>Hasta <strong>10 zonas</strong></li>
        <li>Hasta <strong>20 aparatos por zona</strong></li>
        <li>Hasta <strong>200 registros diarios</strong></li>
        <li>Exportar a <strong>CSV</strong></li>
        <li><strong>Historial mensual</strong> ilimitado</li>
        <li><strong>Reporte PDF</strong> profesional</li>
        <li>Resumen semanal y consumo por zona</li>
      </ul>
      <button class="plan-cta plan-cta-pro" data-plan="pro">Elegir Pro</button>
    </article>

    <!-- Plan Empresa -->
    <article class="plan-card plan-empresa">
      <h3>Empresa</h3>
      <p class="plan-tag">Instituciones y empresas grandes</p>
      <p class="plan-price">$ ‚Äî / mes</p>
      <ul class="plan-lista">
        <li>Hasta <strong>50 zonas</strong></li>
        <li>Hasta <strong>200 aparatos por zona</strong></li>
        <li>Hasta <strong>10,000 registros diarios</strong></li>
        <li><strong>Historial</strong> avanzado y PDF</li>
        <li>Ideal para varias √°reas y equipos</li>
        <li>Listo para multiusuario y sucursales</li>
      </ul>
      <button class="plan-cta" data-plan="empresa">Elegir Empresa</button>
    </article>
  </div>
</section>

  <main>
    <!-- Overlay de autenticaci√≥n -->
    <div id="auth-container" class="auth hidden">
      <div class="auth-box">
        <h2>Bienvenido</h2>

        <input type="email" id="auth-email" placeholder="Correo electr√≥nico">
        <input type="password" id="auth-password" placeholder="Contrase√±a">

        <button id="btn-login">Iniciar sesi√≥n</button>
        <button id="btn-register">Registrarse</button>

        <p class="auth-switch">
          <span id="toggle-auth-mode">¬øNo tienes cuenta? Registrarse</span>
        </p>
      </div>
    </div>

    <section id="como-funciona" class="tarjeta">
      <h2>¬øC√≥mo funciona?</h2>
      <p>
        Esta aplicaci√≥n te permite registrar el consumo el√©ctrico de tus aparatos dom√©sticos o institucionales.
        Asigna cada aparato a una zona (habitaci√≥n, laboratorio, oficina, etc.), y obt√©n:
        <strong>resumen de consumo, costos, metas mensuales, top aparatos, gr√°ficos y un historial mensual.</strong>
      </p>
    </section>

    <section id="formulario" class="tarjeta tarjeta-form">
      <div class="tarjeta-header">
        <h2>Agregar Aparato</h2>
        <span class="badge">Nuevo registro</span>
      </div>
      <form id="form-aparato">
        <div class="campo-grupo">
          <label for="nombre">Nombre del aparato</label>
          <input type="text" id="nombre" placeholder="Ej. Refrigerador, A/C Laboratorio" required>
        </div>

        <div class="campo-grupo">
          <label for="potencia">Potencia (W)</label>
          <input type="number" id="potencia" placeholder="Ej. 800" min="1" required>
        </div>

        <div class="campo-grupo">
          <label for="horas">Horas de uso hoy</label>
          <input type="number" id="horas" placeholder="Ej. 5" min="0" step="0.1" required>
        </div>

        <div class="campo-grupo">
          <label for="zona">Zona / Habitaci√≥n</label>
          <select id="zona">
            <option value="Sala">Sala</option>
            <option value="Cocina">Cocina</option>
            <option value="Rec√°mara 1">Rec√°mara 1</option>
            <option value="Rec√°mara 2">Rec√°mara 2</option>
            <option value="Oficina">Oficina</option>
            <option value="Laboratorio">Laboratorio</option>
            <option value="√Årea com√∫n">√Årea com√∫n</option>
            <option value="Otra">Otra (escribir)</option>
          </select>
        </div>

        <div class="campo-grupo" id="zona-personalizada-grupo" style="display:none;">
          <label for="zona-personalizada">Nombre de la zona</label>
          <input type="text" id="zona-personalizada" placeholder="Ej. Taller, Bodega, Aula 3">
        </div>

        <button type="submit" class="btn-primario">Registrar aparato</button>
      </form>
    </section>

    <section id="registros" class="tarjeta">
      <h2>Registro Diario</h2>
      <div class="tabla-scroll">
        <table id="tabla-registros">
          <thead>
            <tr>
              <th>Aparato</th>
              <th>Zona</th>
              <th>Potencia (W)</th>
              <th>Horas</th>
              <th>Fecha</th>
              <th>Consumo (kWh)</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="acciones-tabla">
        <button id="exportar-csv">üì• Exportar a CSV</button>
        <button id="borrar-todo">üóë Borrar todos los registros</button>
      </div>
    </section>

    <section id="resumen" class="tarjeta tarjeta-grid">
      <div class="tarjeta-resumen">
        <h2>Resumen General</h2>
        <p id="resumen-consumo">Total kWh: 0 | Costo aprox.: $0.00</p>
        <p id="resumen-dia-mes">Costo por d√≠a: $0.00 | Estimado mensual: $0.00</p>
      </div>

      <div id="meta" class="tarjeta-resumen">
        <h2>üéØ Meta Mensual</h2>
        <form id="form-meta">
          <input type="number" id="input-meta" placeholder="Ej. 250 kWh" min="1" required>
          <button type="submit">Guardar Meta</button>
        </form>
        <p id="estado-meta"></p>
      </div>

      <div id="resumen-semanal" class="tarjeta-resumen">
        <h2>üìÖ Resumen Semanal</h2>
        <p id="contenido-semanal">A√∫n no hay suficientes datos para generar el resumen.</p>
      </div>

      <div id="top-aparatos" class="tarjeta-resumen">
        <h2>üîù Top 3 Aparatos m√°s Gastadores</h2>
        <ol id="lista-top">
          <li>No hay registros a√∫n.</li>
        </ol>
      </div>

      <div id="resumen-zonas" class="tarjeta-resumen">
        <h2>üìç Consumo por zona</h2>
        <div class="tabla-scroll">
          <table id="tabla-zonas">
            <thead>
              <tr>
                <th>Zona</th>
                <th>kWh totales</th>
                <th>% del total</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="grafica" class="tarjeta">
      <h2>Gr√°ficas de Consumo</h2>
      <div class="grafica-layout">
        <div class="grafica-container">
          <h3>Consumo diario (kWh)</h3>
          <canvas id="grafica-consumo"></canvas>
        </div>
        <div class="grafica-container">
          <h3>Consumo por aparato</h3>
          <canvas id="grafica-aparato"></canvas>
        </div>
      </div>
    </section>

    <section id="historial" class="tarjeta">
      <h2>Historial Mensual</h2>
      <div class="acciones-tabla">
        <button id="guardar-mes">üì¶ Guardar mes actual</button>
        <select id="selector-historial">
          <option value="">-- Ver historial guardado --</option>
        </select>
        <button id="borrar-historial">üóë Eliminar mes seleccionado</button>
        <button id="btn-reporte-pdf">üìÑ Descargar reporte PDF</button>
      </div>

      <div class="tabla-scroll">
        <table id="tabla-historial" style="margin-top:1rem; display:none;">
          <thead>
            <tr>
              <th>Aparato</th>
              <th>Zona</th>
              <th>Potencia (W)</th>
              <th>Horas</th>
              <th>Fecha</th>
              <th>Consumo (kWh)</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="tip" class="tarjeta">
      <h3>¬øSab√≠as que...?</h3>
      <p id="tip-texto">Puedes ahorrar hasta un 15% si desconectas aparatos en stand-by.</p>
    </section>
  </main>

  <button id="btn-arriba" title="Volver arriba">‚¨ÜÔ∏è</button>
  <div id="alerta-registro">‚úÖ Aparato registrado</div>

  <script type="module" src="script.js"></script>
</body>
</html>
